<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Pokédex Avanzada</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    margin: 0;
    background: #8b0000;
    font-family: 'Press Start 2P', cursive;
    color: white;
    text-align: center;
}

#pokedex {
    width: 900px;
    margin: 20px auto;
    background: #c62828;
    border-radius: 20px;
    padding: 15px;
    box-shadow: 0 0 20px black;
}

.pantalla {
    display: none;
    background: #111;
    padding: 15px;
    border-radius: 10px;
}

.activa {
    display: block;
}

#listaPokemon {
    display: grid;
    grid-template-columns: repeat(auto-fill, 120px);
    gap: 10px;
    justify-content: center;
}

.pokeItem {
    background: #222;
    padding: 5px;
    border-radius: 10px;
    cursor: pointer;
}

.pokeItem img {
    width: 80px;
}

#detalle img {
    width: 150px;
}

.graficas {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
}

canvas {
    background: #fff;
    border-radius: 10px;
    padding: 10px;
}
button {
    font-family: 'Press Start 2P', cursive;
    padding: 8px;
    margin: 10px;
}
</style>
</head>

<body>

<div id="pokedex">
    <h1>POKÉDEX</h1>

    <!-- PANTALLA 1: LISTA -->
    <div id="pantallaLista" class="pantalla activa">
        <input type="text" id="buscador" placeholder="Buscar Pokémon...">
        <div id="listaPokemon"></div>
    </div>

    <!-- PANTALLA 2: DETALLE -->
    <div id="pantallaDetalle" class="pantalla">
        <button onclick="volver()">⬅ VOLVER</button>
        <h2 id="nombrePokemon"></h2>
        <img id="imagenPokemon">

        <div class="graficas">
            <div>
                <h3>Estadísticas</h3>
                <canvas id="graficaStats" width="300" height="300"></canvas>
            </div>
            <div>
                <h3>Top 10 Ataques</h3>
                <canvas id="graficaAtaques" width="400" height="300"></canvas>
            </div>
        </div>

        <div id="listaAtaques"></div>
    </div>
</div>

<script>
// Aquí irá toda la lógica (Parte 2, 3 y 4)
</script>

</body>
</html>
<script>
const pantallaLista = document.getElementById("pantallaLista");
const pantallaDetalle = document.getElementById("pantallaDetalle");
const listaPokemon = document.getElementById("listaPokemon");
const buscador = document.getElementById("buscador");
const nombrePokemon = document.getElementById("nombrePokemon");
const imagenPokemon = document.getElementById("imagenPokemon");

let todos = [];

// Cargar todos los Pokémon (1 a 1010 aprox.)
async function cargarTodos() {
  const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=1010");
  const data = await res.json();
  todos = data.results;
  mostrarLista(todos);
}

function mostrarLista(lista) {
  listaPokemon.innerHTML = "";
  lista.forEach((p, i) => {
    const div = document.createElement("div");
    div.className = "pokeItem";
    const id = i + 1;
    div.innerHTML = `
      <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${id}.png">
      <p>#${id} ${p.name}</p>
    `;
    div.onclick = () => abrirDetalle(id);
    listaPokemon.appendChild(div);
  });
}

async function abrirDetalle(id) {
  const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`);
  const data = await res.json();

  nombrePokemon.textContent = `#${data.id} ${data.name.toUpperCase()}`;
  imagenPokemon.src = data.sprites.front_default;

  // Cambiar de pantalla
  pantallaLista.classList.remove("activa");
  pantallaDetalle.classList.add("activa");

  // (Las gráficas se llenarán en la PARTE 3 y 4)
}

function volver() {
  pantallaDetalle.classList.remove("activa");
  pantallaLista.classList.add("activa");
}

// Buscador
buscador.addEventListener("input", () => {
  const texto = buscador.value.toLowerCase();
  const filtrados = todos.filter(p => p.name.includes(texto));
  mostrarLista(filtrados);
});

// Iniciar
cargarTodos();
</script>


