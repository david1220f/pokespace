<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Pokédex Pixel Pro</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{
  margin:0;
  font-family:Arial;
  background-size:cover;
  background-attachment:fixed;
}
#pokedex{
  width:420px;
  margin:auto;
  background:#c62828;
  border-radius:10px;
  padding:10px;
  color:white;
}
.pantalla{background:#111;padding:10px;border-radius:8px;display:none;}
.activa{display:block;}
#lista{display:grid;grid-template-columns:repeat(3,1fr);gap:5px;}
.poke{background:#333;border-radius:5px;text-align:center;cursor:pointer;}
.poke img{width:72px;image-rendering:pixelated;}
canvas{background:white;border-radius:8px;}
</style>
</head>

<body>
<div id="pokedex">
<h2>POKÉDEX</h2>

<div id="listaPantalla" class="pantalla activa">
<input id="buscar" placeholder="Buscar Pokémon">
<div id="lista"></div>
</div>

<div id="detallePantalla" class="pantalla">
<h3 id="nombre"></h3>
<img id="sprite" width="120" style="image-rendering:pixelated">
<canvas id="radar" width="300" height="300"></canvas>
<h4>Ataques principales</h4>
<ul id="ataques"></ul>
<button onclick="volver()">Volver</button>
</div>
</div>

<script>
const fondos={
fire:"https://i.imgur.com/9b1Z7yP.png",
water:"https://i.imgur.com/6Z5KZyN.png",
grass:"https://i.imgur.com/7P0D8J2.png",
electric:"https://i.imgur.com/3xK7F5W.png",
ghost:"https://i.imgur.com/dZJxk6V.png",
ice:"https://i.imgur.com/3hP1B6m.png",
dragon:"https://i.imgur.com/8FZ6z0p.png",
default:"https://i.imgur.com/ZpK7W2P.png"
};

let todos=[],grafico;

async function cargar(){
  const r=await fetch("https://pokeapi.co/api/v2/pokemon?limit=1010");
  const d=await r.json();
  todos=d.results;
  mostrar(todos);
}
function mostrar(lista){
  document.getElementById("lista").innerHTML="";
  lista.forEach((p,i)=>{
    const div=document.createElement("div");
    div.className="poke";
    div.innerHTML=`<img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${i+1}.png"><br>${p.name}`;
    div.onclick=()=>abrir(i+1);
    document.getElementById("lista").appendChild(div);
  });
}
async function abrir(id){
  const r=await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`);
  const p=await r.json();
  document.getElementById("nombre").textContent=p.name.toUpperCase();
  document.getElementById("sprite").src=p.sprites.front_default;

  const tipo=p.types[0].type.name;
  document.body.style.backgroundImage=`url(${fondos[tipo]||fondos.default})`;

  const stats=p.stats.map(s=>s.base_stat);
  const nombres=["HP","ATQ","DEF","ATQ ESP","DEF ESP","VEL"];
  const etiquetas=nombres.map((n,i)=>`${n}\n${stats[i]}`);

  if(grafico)grafico.destroy();
  grafico=new Chart(document.getElementById("radar"),{
    type:"radar",
    data:{labels:etiquetas,datasets:[{data:stats,backgroundColor:"rgba(255,0,0,0.3)",borderColor:"red"}]},
    options:{scales:{r:{ticks:{display:false}}},plugins:{legend:{display:false}}}
  });

  const listaAtaques=document.getElementById("ataques");
  listaAtaques.innerHTML="";
  const mejores=p.moves.slice(0,10);
  for(let m of mejores){
    const li=document.createElement("li");
    li.textContent=m.move.name;
    listaAtaques.appendChild(li);
  }

  document.getElementById("listaPantalla").classList.remove("activa");
  document.getElementById("detallePantalla").classList.add("activa");
}
function volver(){
  document.getElementById("detallePantalla").classList.remove("activa");
  document.getElementById("listaPantalla").classList.add("activa");
}
document.getElementById("buscar").addEventListener("input",e=>{
  const t=e.target.value.toLowerCase();
  mostrar(todos.filter(p=>p.name.includes(t)));
});
cargar();
</script>
</body>
</html>

